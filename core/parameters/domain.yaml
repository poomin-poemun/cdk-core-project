---
domain:
  domainnames:
    apigw_test_domain:
      id: "apigw_test_domain"
      domain_name: "{{common.mydomain}}"
      domain_name_configurations:
        - certificate_arn: "{{certificate.certificates.pworks.ref}}"
          #certificate_name: ""
          endpoint_type: "REGIONAL"
          # ip_address_type: ""
          # ownership_verification_certificate_arn: ""
          security_policy: "TLS_1_2"
      # mutual_tls_authentication:
      #  truststore_uri: ""
      #  truststore_version: ""
      routing_mode: "ROUTING_RULE_ONLY"
      tags:
        "memo": "Nothing in particular"
  
  routingrules:
    apigw_test_routingrule:
      id: "apigw_test_routingrule"
      actions:
        - invoke_api:
            api_id: "{{apigwlambda.apigws.apigw_test.attr_rest_api_id}}"
            stage: "test"
            #strip_base_path: ""
      #conditions:
      #  - match_base_paths:
      #      - any_of: ""
      #    match_headers:
      #      any_of:
      #        - header: ""
      #          value_glob: ""          
      domain_name_arn: "{{domain.domainnames.apigw_test_domain.attr_domain_name_arn}}"
      priority: 100

  route53:
    apigw_test_recordset:
      id: "apigw_test_recordset"
      name: "{{common.mydomain}}"
      type: "A"
      alias_target:
        dns_name: "{{domain.domainnames.apigw_test_domain.attr_regional_domain_name}}"
        hosted_zone_id: "{{domain.domainnames.apigw_test_domain.attr_regional_hosted_zone_id}}"
        evaluate_target_health: False
      #cidr_routing_config:
      comment: "memo"
      #failover:
      #geo_location:
      #geo_proximity_location:
      #health_check_id:
      hosted_zone_id: "{{common.hosted_zone_id}}"
      #hosted_zone_name: "{{common.mydomain}}"
      #multi_value_answer:
      #region:
      #resource_records:
      #set_identifier:
      #ttl:
      #weight: